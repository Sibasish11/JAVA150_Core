# Implement a program that uses CyclicBarrier to synchronize multiple threads at a common barrier point. [High]

```java

import java.util.concurrent.BrokenBarrierException;
import java.util.concurrent.CyclicBarrier;

class Worker extends Thread {
    private int workerId;
    private CyclicBarrier barrier;

    public Worker(int workerId, CyclicBarrier barrier) {
        this.workerId = workerId;
        this.barrier = barrier;
    }

    @Override
    public void run() {
        try {
            System.out.println("Worker " + workerId + " is performing initial task...");
            Thread.sleep(1000 * workerId); // Simulate some work

            System.out.println("Worker " + workerId + " reached the barrier.");

            // Wait at the barrier until all threads arrive
            barrier.await();

            System.out.println("Worker " + workerId + " continues after the barrier.");
        } catch (InterruptedException | BrokenBarrierException e) {
            e.printStackTrace();
        }
    }
}

public class CyclicBarrierExample {
    public static void main(String[] args) {
        int numberOfWorkers = 3;

        // Runnable task to execute once all threads reach the barrier
        Runnable barrierAction = () -> {
            System.out.println("All workers reached the barrier. Proceeding together!");
        };

        CyclicBarrier barrier = new CyclicBarrier(numberOfWorkers, barrierAction);

        // Start worker threads
        for (int i = 1; i <= numberOfWorkers; i++) {
            new Worker(i, barrier).start();
        }
    }
}


```

## ðŸ”¹ How it works:

- A CyclicBarrier is created with numberOfWorkers and a barrier action (a task executed once all threads reach the barrier).

- Each Worker thread does some initial work, then calls barrier.await().

- Once all threads reach the barrier, the barrier action runs, and then all threads continue execution.

- Unlike CountDownLatch, a CyclicBarrier can be reused for multiple synchronization points.


## Output:

```java
Worker 1 is performing initial task...
Worker 2 is performing initial task...
Worker 3 is performing initial task...
Worker 1 reached the barrier.
Worker 2 reached the barrier.
Worker 3 reached the barrier.
All workers reached the barrier. Proceeding together!
Worker 3 continues after the barrier.
Worker 2 continues after the barrier.
Worker 1 continues after the barrier.
```
