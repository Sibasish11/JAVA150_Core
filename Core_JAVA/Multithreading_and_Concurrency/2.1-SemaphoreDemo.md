# Write a program that uses Semaphore from java.util.concurrent to control access to a limited number of resources. [High]

```java


import java.util.concurrent.Semaphore;

class Worker extends Thread {
    private final Semaphore semaphore;
    private final int workerId;

    public Worker(Semaphore semaphore, int workerId) {
        this.semaphore = semaphore;
        this.workerId = workerId;
    }

    @Override
    public void run() {
        try {
            System.out.println("Worker " + workerId + " is waiting for a machine...");
            
            // acquire permit (like booking a machine)
            semaphore.acquire();
            System.out.println("Worker " + workerId + " got access to a machine!");
            
            // simulate doing some work
            Thread.sleep(2000);

            System.out.println("Worker " + workerId + " released the machine.");
            
            // release permit (machine is free)
            semaphore.release();

        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}

public class SemaphoreDemo {
    public static void main(String[] args) {
        int machineCount = 2; // only 2 machines available
        Semaphore semaphore = new Semaphore(machineCount);

        // Create 5 workers competing for 2 machines
        for (int i = 1; i <= 5; i++) {
            new Worker(semaphore, i).start();
        }
    }
}


```


### âœ… Expected Output:

```java

Worker 1 is waiting for a machine...
Worker 1 got access to a machine!
Worker 2 is waiting for a machine...
Worker 2 got access to a machine!
Worker 3 is waiting for a machine...
Worker 4 is waiting for a machine...
Worker 5 is waiting for a machine...
Worker 1 released the machine.
Worker 3 got access to a machine!
Worker 2 released the machine.
Worker 4 got access to a machine!


```
